import{_ as Z,a as tt,b as et,c as st,d as ot}from"./BKgYlLWd.js";import{u as j}from"./CylWgPGq.js";import{d as x,l as z,o as B,n as P,i as G,a as o,c as v,b as T,F as K,r as R,e as p,_ as nt,u as at,f as it,g as rt,h as $,w as ct,j as r,k as O,U as lt,E as _t,m as ut}from"./CaeWsWSi.js";import{_ as dt}from"./DhYsJJWz.js";import{u as ft}from"./B2SVPvHF.js";import{u as mt,U as q}from"./-X8W_4WG.js";import{u as pt}from"./BxvrhfUw.js";import"./C-q9iW_y.js";import"./DzGq21q7.js";const F={compareList:(d,a)=>d.toString()===a.toString()},gt={class:"contents_-football_-live-Mzx5SR",id:"contents_-football_-live"},Lt={class:"leagueFrame"},vt=x({__name:"LiveMain",props:{result_league_list:{},onMounted:{type:Function}},setup(d,{expose:a}){const _=d,c=z(),l=j(),g=(i,u)=>{c.value&&c.value[i]&&c.value[i].update(u)};return B(async()=>{await P(),await l.onMounted("football"),await _.onMounted()}),G(()=>{l.onBeforeUnmount()}),a({update:g}),(i,u)=>{const h=Z;return o(),v("div",gt,[T("div",Lt,[(o(!0),v(K,null,R(_.result_league_list,(e,y)=>(o(),p(h,{key:`${y}-0`,ref_for:!0,ref_key:"$live",ref:c,idx:y,league:e},null,8,["idx","league"]))),128))])])}}}),ht={class:"contents_-football_-live-Mzx5SR",id:"contents_-football_-live"},yt={class:"leagueFrame"},St=x({__name:"FixturesMain",props:{result_league_list:{}},setup(d){const a=d,_=z();return B(async()=>{await P()}),(c,l)=>{const g=tt;return o(),v("div",ht,[T("div",yt,[(o(!0),v(K,null,R(a.result_league_list,(i,u)=>(o(),p(g,{key:`${u}-0`,ref_for:!0,ref_key:"$fixtures",ref:_,idx:u,league:i},null,8,["idx","league"]))),128))])])}}}),kt={class:"contents_-football_-live-Mzx5SR",id:"contents_-football_-live"},bt={class:"leagueFrame"},Ot=x({__name:"OddsMain",props:{result_league_list:{}},setup(d){const a=d,_=c=>c===a.result_league_list.length-1;return(c,l)=>{const g=et;return o(),v("div",kt,[T("div",bt,[(o(!0),v(K,null,R(a.result_league_list,(i,u)=>(o(),p(g,{idx:u,isLast:_(u),league:i},null,8,["idx","isLast","league"]))),256))])])}}}),xt={class:"contents_-football_-live-Mzx5SR",id:"contents_-football_-live"},Ct={class:"leagueFrame"},wt=x({__name:"ResultMain",props:{result_league_list:{}},setup(d){const a=d;return B(async()=>{await P()}),(_,c)=>{const l=st;return o(),v("div",xt,[T("div",Ct,[(o(!0),v(K,null,R(a.result_league_list,(g,i)=>(o(),p(l,{idx:i,league:g},null,8,["idx","league"]))),256))])])}}}),Mt={};function $t(d,a){const _=ot;return o(),p(_)}const Ft=nt(Mt,[["render",$t]]),At=x({__name:"index",setup(d){const{MAX_PAGINATION_CONTENT:a}=at().public.CONSTANTS,_=ft(),c=mt(),l=pt(),g=it(),i=j(),u=rt(),h=$({key:"tab"}),e=$({isBooting:!0,isPending:!0,tab:u.query.tab??"live",isOutOfContent:l.getIsOutOfContent(h.key)??!1,result:{nav_code:"S001"}}),y=z(),t=$({totalList:[],totalKickOffList:[],sortedList:[],sortedKickOffList:[]}),L=$({isPending:!1,idx:0}),I=()=>{_.init(),l.setScroll2Top(),L.idx=0,t.sortedList=[],l.setIsOutOfContent(h.key,!1)},H=async()=>{console.log("change tab"),e.tab=u.query.tab??"live",t.totalList=[],e.isBooting=!0,e.isPending=!0,I(),await N()},X=async()=>{e.isBooting||(I(),e.isPending=!0,e.tab==="live"?await C():await N(),e.isPending=!1)},J=async()=>{await k()},k=async()=>{const f=[...t.sortedList],n=t.sortedList.map(s=>s.match_id),m=t.sortedList.map(s=>s.ai_home_scores[0]),w=t.sortedList.map(s=>s.ai_away_scores[0]);t.sortedList.map(s=>s.ai_status_id);const M=[...t.sortedKickOffList];t.totalList=i.updateLiveRealTime(t.totalList),t.totalKickOffList=i.updateLiveKickOff(t.totalList),t.sortedList=i.updateLiveRealTime(t.sortedList),t.sortedKickOffList=i.updateLiveKickOff(t.sortedList),await C(!0),lt.compareEquals(f,t.sortedList);const U=t.sortedList.map(s=>s.match_id);F.compareList(n,U);const D=t.sortedList.map(s=>s.ai_home_scores[0]);F.compareList(m,D);const A=t.sortedList.map(s=>s.ai_away_scores[0]);F.compareList(w,A),F.compareList(M,t.sortedKickOffList),y.value&&t.sortedList.map((s,b)=>{const V=t.sortedKickOffList.find(E=>E.idx===b),W=M.find(E=>E.idx===b)??0,Y=V?V.ai_kickoff_timestamp:W.ai_kickoff_timestamp,S={};w[b]!==s.ai_away_scores[0]&&(S.ai_away_scores=s.ai_away_scores),m[b]!==s.ai_home_scores[0]&&(S.ai_home_scores=s.ai_home_scores),S.ai_kickoff_timestamp=Y,S.ai_match_status=s.ai_status_id,S.match_id=s.match_id,y.value.update(b,S)})},N=async()=>{const f=q.chckDateIsToday(q.addMillisecond(c.getFromDate())),n=await g.onMountedTab("football",e.tab,{sid:_t[ut.football],fromdate:f?0:c.getFromDate()});console.log("res from page index: ",n);try{t.totalList=n.data,await C(),e.tab==="live"&&await k()}catch{}e.isPending=!1,e.isBooting=!1},Q=async(f,n)=>{if(n.length===0)return n;if(f)return n.slice(0,a*L.idx);if(n.length<L.idx)return n;L.idx!==0&&(L.isPending=!0),L.idx++;const m=n.slice(0,a*L.idx);return L.isPending=!1,m},C=async(f=!1)=>{const n=_.sortList(t.totalList,c.getDate(),{tab:e.tab,date:m=>q.addMillisecond(m.ai_match_time),league:m=>m.ai_competition_id});return n.length===t.sortedList.length&&n.length!==0?(f&&(t.sortedList=n),e.isOutOfContent=!0,e.isOutOfContent):(t.sortedList=await Q(f,n),e.isOutOfContent=n.length===t.sortedList.length,e.isOutOfContent)};return B(async()=>{e.tab=u.query.tab??"live",e.isPending=!0,await P(),l.setScroll2Top(),await N(),l.register(h.key,async()=>{const f=await C();return await k(),f})}),G(async()=>{I(),l.onBeforeUnmount(h.key)}),(f,n)=>{const m=vt,w=St,M=Ot,U=wt,D=Ft,A=dt;return o(),p(A,{name:"tabcontent",isPending:r(e).isPending,pageIsPending:r(L).isPending,isOutOfContent:r(e).isOutOfContent,sName:"football",tab:r(e).tab,result:r(e).result,changeTab:H,changeDate:X,toggleByTime:J,updateLiveRealTime:k},{default:ct(()=>[r(e).tab==="live"?(o(),p(m,{key:0,ref_key:"$liveMain",ref:y,result_league_list:r(t).sortedList,onMounted:k},null,8,["result_league_list"])):O("",!0),r(e).tab==="fixtures"?(o(),p(w,{key:1,result_league_list:r(t).sortedList},null,8,["result_league_list"])):O("",!0),r(e).tab==="odds"?(o(),p(M,{key:2,result_league_list:r(t).sortedList},null,8,["result_league_list"])):O("",!0),r(e).tab==="result"?(o(),p(U,{key:3,result_league_list:r(t).sortedList},null,8,["result_league_list"])):O("",!0),r(e).tab==="league"?(o(),p(D,{key:4})):O("",!0)]),_:1},8,["isPending","pageIsPending","isOutOfContent","tab","result"])}}});export{At as default};
