import{_ as U,a as V,b as q}from"./D9npeaJb.js";import{d as C,o as y,n as h,a as s,c as O,b as P,F as w,r as F,e as f,_ as z,l as j,h as p,m as G,E as M,p as X,u as Y,f as H,g as J,i as K,w as Q,j as i,k as S}from"./B5MixV_i.js";import{_ as W}from"./_esXeeLw.js";import{a as N,u as Z}from"./BfpOLjfC.js";import{u as tt}from"./DLEWMXe2.js";import"./cQYV8wSA.js";import"./Cmv0FSzz.js";import"./g8Cb1Sp4.js";import"./CBrtR3aG.js";const et={class:"contents_-football_-live-Mzx5SR",id:"contents_-football_-live"},nt={class:"leagueFrame"},ot=C({__name:"LiveMain",props:{result_league_list:{}},setup(n){const l=n;return y(async()=>{await h()}),(u,g)=>{const _=U;return s(),O("div",et,[P("div",nt,[(s(!0),O(w,null,F(l.result_league_list,(e,c)=>(s(),f(_,{idx:c,league:e},null,8,["idx","league"]))),256))])])}}}),st={class:"contents_-football_-live-Mzx5SR",id:"contents_-football_-live"},at={class:"leagueFrame"},it=C({__name:"FixturesMain",props:{result_league_list:{}},setup(n){const l=n;return y(async()=>{await h()}),(u,g)=>{const _=V;return s(),O("div",st,[P("div",at,[(s(!0),O(w,null,F(l.result_league_list,(e,c)=>(s(),f(_,{idx:c,league:e},null,8,["idx","league"]))),256))])])}}}),rt={};function lt(n,l){const u=q;return s(),f(u)}const ct=z(rt,[["render",lt]]),ut=j("liveIntervalLoadingStore",()=>{const n=p({isOnLiveTab:!1,isPending:!1,termDuration:1e4,realTimeData:{}}),l=async e=>{if(!n.isOnLiveTab)return;n.isPending=!0;const c=await G(`${X[e]}RealTime`,{method:"POST"},{sid:M.FootBall,fromdate:N().getFromDate()});console.log("res from interval loading: ",c),n.realTimeData=c.data,n.isPending=!1,setTimeout(async()=>{n.isOnLiveTab&&await l(e)},n.termDuration)};return{onMounted:async e=>{n.isOnLiveTab=!0,await l(e)},onBeforeUnmount:()=>{n.isOnLiveTab=!1},setTabActive:e=>{n.isOnLiveTab=e}}}),vt=C({__name:"index",setup(n){const{ONE_DAY_MILLISECOND:l,MAX_PAGINATION_CONTENT:u}=Y().public.CONSTANTS,g=Z(),_=N(),e=tt(),c=H(),T=ut(),v=J(),b=p({key:"tab"}),t=p({isBooting:!0,isPending:!0,tab:v.query.tab??"live",isOutOfContent:e.getIsOutOfContent(b.key)??!1,result:{nav_code:"S001"}}),a=p({totalList:[],sortedList:[]}),r=p({isPending:!1,idx:0}),x=()=>{g.init(),e.setScroll2Top(),r.idx=0,a.sortedList=[],e.setIsOutOfContent(b.key,!1)},k=async()=>{t.tab=v.query.tab,a.totalList=[],t.isBooting=!0,t.isPending=!0,x(),await B()},D=async()=>{t.isBooting||(x(),t.isPending=!0,await L(),t.isPending=!1)},I=async()=>{await L(!0)},B=async()=>{const d=await c.onMountedTab("football",t.tab,{sid:M.FootBall,fromdate:_.getFromDate()});a.totalList=d.data,await L(),t.isPending=!1,t.isBooting=!1},$=async(d,o)=>{if(o.length===0)return o;if(d)return o.slice(0,u*r.idx);if(o.length<r.idx)return o;r.idx!==0&&(r.isPending=!0),r.idx++;const m=o.slice(0,u*r.idx);return r.isPending=!1,m},L=async(d=!1)=>{const o=g.sortList(a.totalList,_.getDate(),{tab:t.tab,date:m=>new Date(+`${m.ai_match_time}000`),league:m=>m.ai_competition_id});return o.length===a.sortedList.length&&o.length!==0?(d&&(a.sortedList=o),t.isOutOfContent=!0,t.isOutOfContent):(a.sortedList=await $(d,o),t.isOutOfContent=o.length===a.sortedList.length,t.isOutOfContent)};return y(async()=>{t.tab=v.query.tab,t.isPending=!0,await h(),e.setScroll2Top(),await B(),e.register(b.key,L),await T.onMounted("football")}),K(async()=>{x(),e.onBeforeUnmount(b.key),T.onBeforeUnmount()}),(d,o)=>{const m=ot,A=it,E=ct,R=W;return s(),f(R,{name:"tabcontent",isPending:i(t).isPending,pageIsPending:i(r).isPending,isOutOfContent:i(t).isOutOfContent,sName:"FootBall",tab:i(t).tab,result:i(t).result,changeTab:k,changeDate:D,toggleByTime:I},{default:Q(()=>[i(t).tab==="live"?(s(),f(m,{key:0,result_league_list:i(a).sortedList},null,8,["result_league_list"])):S("",!0),i(t).tab==="fixtures"?(s(),f(A,{key:1,result_league_list:i(a).sortedList},null,8,["result_league_list"])):S("",!0),i(t).tab==="league"?(s(),f(E,{key:2})):S("",!0)]),_:1},8,["isPending","pageIsPending","isOutOfContent","tab","result"])}}});export{vt as default};
